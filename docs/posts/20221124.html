<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Leaf Field</title><meta name="next-head-count" content="3"/><meta charSet="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><link rel="shortcut icon" href="/favicon.png" type="image/x-icon"/><link rel="preload" href="/MyBlog/_next/static/css/72e15b2a2293810f.css" as="style"/><link rel="stylesheet" href="/MyBlog/_next/static/css/72e15b2a2293810f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/MyBlog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/MyBlog/_next/static/chunks/webpack-905018acf9bf0e5a.js" defer=""></script><script src="/MyBlog/_next/static/chunks/framework-ffee79c6390da51e.js" defer=""></script><script src="/MyBlog/_next/static/chunks/main-a1e620db5c7330ca.js" defer=""></script><script src="/MyBlog/_next/static/chunks/pages/_app-24c70877f025bea7.js" defer=""></script><script src="/MyBlog/_next/static/chunks/934-eaa95368b0f987cd.js" defer=""></script><script src="/MyBlog/_next/static/chunks/pages/posts/%5Bid%5D-66dec29fab080631.js" defer=""></script><script src="/MyBlog/_next/static/_1Szs5HlWQaePplz2Kfl5/_buildManifest.js" defer=""></script><script src="/MyBlog/_next/static/_1Szs5HlWQaePplz2Kfl5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout__GlobalContainer-sc-1nd6r23-0 gIWIeT"><div class="Header_container__0gwuB"><div class="Header_title__AOPgN"><a href="/MyBlog"><img src="/Yoko&#x27;s portoforio.png"/></a><a href="/MyBlog"><h1>Leaf Field</h1></a></div><nav class="Header_navi__ORwcX"><ul><li>portfolio</li><li><a href="/MyBlog/page/1">blog</a></li><li>about</li><li>contact</li></ul></nav></div><div class="Layout__EmptyDiv-sc-1nd6r23-1 iqvzRJ"></div><h1>記事の「次へ」ボタン完成</h1><h2>2022-11-24</h2><img src="/postImage/20221124.jpg" alt=""/><div><p>記事内のページネーション実装が中々手ごわかった<br>
というのも「次の記事」がない場合 getStaticProps が undfined に対してエラーを吐いてしまうから<br>
色々試行錯誤した結果</p>
<pre><code>export function getNext(id) {
  const fileNames = fs.readdirSync(postsDirectory);
  const ids = fileNames.map((fileName) => {
    return fileName.replace(/\.md/, "");
  });
  const sortedIDs = ids.reverse();
  const postNumber = sortedIDs.indexOf(id);
  // return sortedIDs[postNumber + 1] || {};
  return sortedIDs[postNumber + 1] || false;
}
</code></pre>
<p>という風に or の論理演算子を使って false を返せばエラーが出ないことが分かった（ここは空のオブジェクトとかでもいいそう）<br>
そのうえで and の論理演算子で表示非表示を切り替えれば無事「次の記事へ」のページネーション完成！</p>
<pre><code>&#x3C;div>{nextID &#x26;&#x26; &#x3C;Link href={`/posts/${nextID}`}>次の記事へ&#x3C;/Link>}&#x3C;/div>
</code></pre>
</div><div><a href="/MyBlog/posts/20221125">前の記事へ</a></div><div><a href="/MyBlog/posts/20221121">次の記事へ</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"20221124","contentHTML":"\u003cp\u003e記事内のページネーション実装が中々手ごわかった\u003cbr\u003e\nというのも「次の記事」がない場合 getStaticProps が undfined に対してエラーを吐いてしまうから\u003cbr\u003e\n色々試行錯誤した結果\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eexport function getNext(id) {\r\n  const fileNames = fs.readdirSync(postsDirectory);\r\n  const ids = fileNames.map((fileName) =\u003e {\r\n    return fileName.replace(/\\.md/, \"\");\r\n  });\r\n  const sortedIDs = ids.reverse();\r\n  const postNumber = sortedIDs.indexOf(id);\r\n  // return sortedIDs[postNumber + 1] || {};\r\n  return sortedIDs[postNumber + 1] || false;\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eという風に or の論理演算子を使って false を返せばエラーが出ないことが分かった（ここは空のオブジェクトとかでもいいそう）\u003cbr\u003e\nそのうえで and の論理演算子で表示非表示を切り替えれば無事「次の記事へ」のページネーション完成！\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;div\u003e{nextID \u0026#x26;\u0026#x26; \u0026#x3C;Link href={`/posts/${nextID}`}\u003e次の記事へ\u0026#x3C;/Link\u003e}\u0026#x3C;/div\u003e\n\u003c/code\u003e\u003c/pre\u003e\n","title":"記事の「次へ」ボタン完成","date":"2022-11-24","thumbnail":"/postImage/20221124.jpg"},"nextID":"20221121","prevID":"20221125"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"20221124"},"buildId":"_1Szs5HlWQaePplz2Kfl5","assetPrefix":"/MyBlog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>