<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Leaf Field</title><meta name="next-head-count" content="3"/><meta charSet="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><link rel="shortcut icon" href="/favicon.png" type="image/x-icon"/><link rel="preload" href="/_next/static/css/72e15b2a2293810f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/72e15b2a2293810f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-b6d8a2e8800ef3c4.js" defer=""></script><script src="/_next/static/chunks/framework-ffee79c6390da51e.js" defer=""></script><script src="/_next/static/chunks/main-5441aaf24e0b5467.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7aff570ceb39eb07.js" defer=""></script><script src="/_next/static/chunks/934-eaa95368b0f987cd.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-66dec29fab080631.js" defer=""></script><script src="/_next/static/J20-33CWgi-IcLKsanr8h/_buildManifest.js" defer=""></script><script src="/_next/static/J20-33CWgi-IcLKsanr8h/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout__GlobalContainer-sc-1nd6r23-0 gIWIeT"><div class="Header_container__0gwuB"><div class="Header_title__AOPgN"><a href="/"><img src="/Yoko&#x27;s portoforio.png"/></a><a href="/"><h1>Leaf Field</h1></a></div><nav class="Header_navi__ORwcX"><ul><li>portfolio</li><li><a href="/page/1">blog</a></li><li>about</li><li>contact</li></ul></nav></div><div class="Layout__EmptyDiv-sc-1nd6r23-1 iqvzRJ"></div><h1>ReactにおけるIntersectionObserverの取り扱い</h1><h2>2022-11-14</h2><img src="/images/thumbnail04.jpg" alt=""/><div><p>ヘッダーも作って少しはブログっぽくなったかな……？と思う今日この頃<br>
<img src="/postImage/20221114.png" alt="ブログの画像"></p>
<p>そしてヘッダーを作っている最中に大きな問題が orz<br>
javascript 勉強初期からの相棒、IntersectionObsever 君がうまく機能してくれない/_ \<br>
何故なのか、必死に理由を探しつつ手探りしつつ色々なブログをあさっていたらこちらの
<a href="https://miyauchi.dev/ja/posts/react-lazy-intersection/">ブログ様</a>に答えが！</p>
<pre><code>useEffect(() => {
  const observer = new IntersectionObserver(([entry]) => {
    if (entry.isIntersecting) {
      setIsActive(true);
    } else {
      setIsActive(false);
    }
  });
  observer.observe(headerRef.current);
}, []);
</code></pre>
<p>IntersectionObserver に useRef を渡す場合.current が必須なのと（通常の javascript の e.target と同じ感覚でいた）この場合の entry は[]で囲う必要があった<br>
ref.current って配列……？<br>
うーん(￣ ┰ ￣*)React って良くも悪くも独特なお作法多いなあ、思わず querySelecter に逃げそうになった</p>
</div><div><a href="/posts/20221115">前の記事へ</a></div><div><a href="/posts/20221113">次の記事へ</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"20221114","contentHTML":"\u003cp\u003eヘッダーも作って少しはブログっぽくなったかな……？と思う今日この頃\u003cbr\u003e\n\u003cimg src=\"/postImage/20221114.png\" alt=\"ブログの画像\"\u003e\u003c/p\u003e\n\u003cp\u003eそしてヘッダーを作っている最中に大きな問題が orz\u003cbr\u003e\njavascript 勉強初期からの相棒、IntersectionObsever 君がうまく機能してくれない/_ \\\u003cbr\u003e\n何故なのか、必死に理由を探しつつ手探りしつつ色々なブログをあさっていたらこちらの\r\n\u003ca href=\"https://miyauchi.dev/ja/posts/react-lazy-intersection/\"\u003eブログ様\u003c/a\u003eに答えが！\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003euseEffect(() =\u003e {\r\n  const observer = new IntersectionObserver(([entry]) =\u003e {\r\n    if (entry.isIntersecting) {\r\n      setIsActive(true);\r\n    } else {\r\n      setIsActive(false);\r\n    }\r\n  });\r\n  observer.observe(headerRef.current);\r\n}, []);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIntersectionObserver に useRef を渡す場合.current が必須なのと（通常の javascript の e.target と同じ感覚でいた）この場合の entry は[]で囲う必要があった\u003cbr\u003e\nref.current って配列……？\u003cbr\u003e\nうーん(￣ ┰ ￣*)React って良くも悪くも独特なお作法多いなあ、思わず querySelecter に逃げそうになった\u003c/p\u003e\n","title":"ReactにおけるIntersectionObserverの取り扱い","date":"2022-11-14","thumbnail":"/images/thumbnail04.jpg"},"nextID":"20221113","prevID":"20221115"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"20221114"},"buildId":"J20-33CWgi-IcLKsanr8h","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>