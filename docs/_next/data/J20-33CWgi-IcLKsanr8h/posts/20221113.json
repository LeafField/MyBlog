{"pageProps":{"postData":{"id":"20221113","contentHTML":"<p>よく見たらページネーションの１ページが３つのコンテンツ、２ページが１ページ目とコンテンツと被ってるなどバグがあってので修正</p>\n<pre><code>export const getStaticPaths = async () => {\r\n  const allPostData = getSortedPostData();\r\n  const pageCount = Math.ceil(\r\n    parseInt(allPostData.length) / parseInt(pageViewPost) + 1\r\n  );\r\n\r\n  const paths = allPostData.slice(0, pageCount).map((_, i) => ({\r\n    params: {\r\n      page: i.toString(),\r\n    },\r\n  }));\r\n\r\n  return {\r\n    paths,\r\n    fallback: false,\r\n  };\r\n};\r\n\r\nexport const getStaticProps = async ({ params }) => {\r\n  const nowArryCount = parseInt(params.page) - 1;\r\n  const allPostData = getSortedPostData();\r\n  const viewPost = allPostData.slice(\r\n    parseInt(nowArryCount) * pageViewPost,\r\n    (parseInt(nowArryCount) + 1) * parseInt(pageViewPost) + 1\r\n  );\r\n  return {\r\n    props: {\r\n      viewPost,\r\n    },\r\n  };\r\n};\n</code></pre>\n<p>この部分を</p>\n<pre><code>\r\nconst pageViewPost = 2;\r\n\r\nexport const getStaticPaths = async () => {\r\n  const allPostData = getSortedPostData();\r\n  const pageCount = Math.ceil(\r\n    parseInt(allPostData.length) / parseInt(pageViewPost)\r\n  );\r\n\r\n  const paths = allPostData.slice(0, pageCount).map((_, i) => ({\r\n    params: {\r\n      page: parseInt(i + 1).toString(),\r\n    },\r\n  }));\r\n\r\n  return {\r\n    paths,\r\n    fallback: false,\r\n  };\r\n};\r\n\r\nexport const getStaticProps = async ({ params }) => {\r\n  const nowArryCount = parseInt(params.page);\r\n  const allPostData = getSortedPostData();\r\n  const viewPost = allPostData.slice(\r\n    (parseInt(nowArryCount) - parseInt(1)) * pageViewPost,\r\n    parseInt(nowArryCount) * parseInt(pageViewPost)\r\n  );\r\n  return {\r\n    props: {\r\n      viewPost,\r\n      nowArryCount,\r\n    },\r\n  };\r\n};\n</code></pre>\n<p>と修正<br>\nほとんど間違い探しのような違いしかないけれど getStaticProps の Slice の計算が間違っていた模様……<br>\nページ数が１から始まるのに対して配列は０から始まるからその辺で getStaticProps のアルゴリズムを間違えた<br>\nうーん、エンジニア目指すならもっとアルゴリズムは頑張って練習しないとなあ、教材で練習してばっかだと中々身につかないしこればっかりは数こなすしかないのかなあ？</p>\n","title":"ページネーションのバグ修正","date":"2022-11-13","thumbnail":"/postImage/20221113.png"},"nextID":"20221112","prevID":"20221114"},"__N_SSG":true}